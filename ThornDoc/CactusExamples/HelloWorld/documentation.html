<?xml version="1.0" encoding="utf-8" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head> <title>HelloWorld</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<!-- mathjax,charset=utf-8,html,xhtml --> 
<meta name="src" content="documentation.tex" /> 
<link rel="stylesheet" type="text/css" href="documentation.css" /> 
 <script type="text/x-mathjax-config"> MathJax.Hub.Config({ 'fast-preview': {disabled: true}, TeX: { extensions: ["color.js","AMSmath.js"], equationNumbers: { autoNumber: "AMS" } }, extensions: ["tex2jax.js"], tex2jax: {  inlineMath: [ ["\\\(","\\\)"] ], displayMath: [ ['$$','$$'], ["\\[","\\]"] ], processEscapes: true, processEnvironments: true } }); </script> 
 <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>  
</head><body 
>
<div class="maketitle">
                                                                                       
                                                                                       
                                                                                       
                                                                                       

<h2 class="titleHead">HelloWorld</h2>
<div class="author" ><span 
class="cmr-12">Gabrielle Allen</span></div>
<br />
<div class="date" >\( \)<span 
class="cmr-12">Date</span>\( \)</div>
</div>
<div 
class="abstract" 
>
<div class="center" 
>
<!--l. 20--><p class="noindent" >
</p><!--l. 20--><p class="noindent" ><span 
class="cmbx-9">Abstract</span></p></div>
     <!--l. 21--><p class="indent" >    <span 
class="cmr-9">The Hello World thorn is the simplest possible example of programming an application with the</span>
     <span 
class="cmr-9">Cactus Framework</span>
</p>
</div>
<h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-10001"></a>Purpose</h3>
<!--l. 27--><p class="noindent" >The thorn demonstrates how to implement the typical first example of all programming languages with Cactus
— printing the words <span 
class="cmtt-10">Hello World! </span>to the screen.
</p><!--l. 31--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-20002"></a>Tutorial</h3>
                                                                                       
                                                                                       
<!--l. 33--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">2.1   </span> <a 
 id="x1-30002.1"></a>Source Code</h4>
<!--l. 35--><p class="noindent" >Cactus allows you to write thorns using any mixture of Fortran 77, Fortran 90, C and C++, in this case there is
only one source code routine in the thorn, and we have chosen to write this in C. Later we will see how this
routine can be <span 
class="cmti-10">scheduled </span>to executed when Cactus is run.
</p><!--l. 41--><p class="noindent" >The actual code which prints is in the file <br 
class="newline" /><br 
class="newline" />
</p><!--l. 43--><p class="noindent" ><span 
class="cmtt-10">CactusExamples/HelloWorld/src/HelloWorld.c </span><br 
class="newline" /><br 
class="newline" />
</p><!--l. 45--><p class="noindent" >Note that this file is listed in the thorn make file <br 
class="newline" /><br 
class="newline" />
</p><!--l. 47--><p class="noindent" ><span 
class="cmtt-10">CactusExamples/HelloWorld/src/make.code.defn </span><br 
class="newline" /><br 
class="newline" />
</p><!--l. 49--><p class="noindent" >which informs Cactus to include this file when building executables.
</p><!--l. 52--><p class="noindent" >The <span 
class="cmtt-10">HelloWorld.c </span>file contains the lines
                                                                                       
                                                                                       
</p>
<div class="verbatim" id="verbatim-1">
C1.  #include &#x0022;cctk.h&#x0022;
 <br />C2.  #include &#x0022;cctk_Arguments.h&#x0022;
 <br />C3
 <br />C4.  void HelloWorld(CCTK_ARGUMENTS)
 <br />C5.  {
 <br />C6.    DECLARE_CCTK_ARGUMENTS
 <br />C7.
 <br />C8.    CCTK_INFO(&#x0022;Hello World !&#x0022;);
 <br />C9.
 <br />C10.   return;
 <br />C11. }
</div>
<!--l. 67--><p class="nopar" >
</p><!--l. 70--><p class="noindent" >Lets go through this line by line, and compare it to a standalone Hello World program written to match the lines
of the Cactus routine.
                                                                                       
                                                                                       
</p>
<div class="verbatim" id="verbatim-2">
S1.  #include &#x003C;stdio.h&#x003E;
 <br />S2.
 <br />S3.
 <br />S4.  int main()
 <br />S5.  {
 <br />S6.
 <br />S7.
 <br />S8.    printf(&#x0022;Hello World !\n&#x0022;);
 <br />S9.
 <br />S10.   return 0;
 <br />S11. }
</div>
<!--l. 85--><p class="nopar" >
</p><!--l. 88--><p class="noindent" >
     </p><dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmbx-10">Include Files (C1/C2): </span>All source files which make use of Cactus infrastructure need to include
     <span 
class="cmtt-10">cctk.h</span>, this sets up the Cactus data types and prototypes Cactus functions. All scheduled functions
     also need to include <span 
class="cmtt-10">cctk</span><span 
class="cmtt-10">_Arguments.h </span>which contains information about the data variables which
     are available to the function.
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmbx-10">Function Name (C4): </span>Scheduled functions are always void, and the argument contains the macro
     <span 
class="cmtt-10">CCTK</span><span 
class="cmtt-10">_ARGUMENTS </span>which is expanded during compilation to contain information about the data
     variable available to the function. In our simple case there are actually no data variables.
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmbx-10">Arguments Declaration (C6): </span>This line defines any data variables available to the routine, from this
     thorn and inherited from other thorns.
     </dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmbx-10">Cactus Info (C8): </span>Finally, the line to print to screen. We could have just used <span 
class="cmtt-10">printf(&#x0022;Hello World</span>
     <span 
class="cmtt-10">!</span><br 
class="newline" /><span 
class="cmtt-10">n&#x0022;) </span>here as in the standalone function, but here we actually use a Cactus function <span 
class="cmtt-10">CCTK</span><span 
class="cmtt-10">_INFO</span>
     which formats output to screen to include the name of the thorn. That isn’t so useful here, but
     in  cases  where  there  are  many  thorns  it  helps  for  understanding  the  screen  output.  Also,  for
     more complicated applications running in parallel, the <span 
class="cmtt-10">CCTK</span><span 
class="cmtt-10">_INFO </span>function controls which of the
     processors actually writes to screen (having 1024 processors each writing <span 
class="cmtt-10">Hello World ! </span>could look
     confusing!).
     </dd></dl>
                                                                                       
                                                                                       
<!--l. 106--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-40003"></a>Configuration Files</h3>
<!--l. 108--><p class="noindent" >Cactus Configuration (or <span 
class="cmtt-10">CCL</span>) files are the way in which the Cactus Flesh find out information about your thorn.
Cactus isn’t interested in all the private stuff of your thorn, but it needs to know about things like variables,
routines, parameters which will interface with other thorns.
</p><!--l. 114--><p class="noindent" >In the Hello World example these files are trivial, since we have no variables, only one routine to schedule, and
no parameters (to learn about parameters you could try to add a parameter to this thorn to switch off the
output, or to change the number of times the message is printed). The contents of our CCL files
are
</p><!--l. 120--><p class="noindent" >
     </p><dl class="description"><dt class="description">
 </dt><dd 
class="description"><span 
class="cmbx-10">interface.ccl</span>
                                                                                       
                                                                                       
     <div class="verbatim" id="verbatim-3">
     implements: helloworld
</div>
     <!--l. 127--><p class="nopar" >
     </p><!--l. 130--><p class="noindent" >Each thorn has to give a name to what it does, here we say that we do is called ”helloworld”. (If
     you look further into the notion of implementations, you will find that this mechanism allows you
     to switch between different thorns which provide the same implementation, but for our example
     this isn’t very useful).
     </p></dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmbx-10">param.ccl</span>
     <!--l. 138--><p class="noindent" >There are no parameters in the HelloWorld thorn, so this file is empty.
     </p></dd><dt class="description">
 </dt><dd 
class="description"><span 
class="cmbx-10">schedule.ccl</span>
                                                                                       
                                                                                       
     <div class="verbatim" id="verbatim-4">
     schedule HelloWorld at CCTK_EVOL
      <br />{
      <br />  LANG: C
      <br />} &#x0022;Print message to screen&#x0022;
</div>
     <!--l. 148--><p class="nopar" >
     </p><!--l. 151--><p class="noindent" >This file instructs Cactus to run the routine called HelloWorld in our thorn during the evolution
     timebin. Additionally it tells Cactus that the source codee is written in C, and provides a descipion
     of what the routine does.
</p>
     </dd></dl>
<!--l. 158--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-50004"></a>Screen Output</h3>
<!--l. 160--><p class="noindent" >Here we list the actual output from running the Hello World parameter file. Note that as we develop the
framework this output may look a little different by the time you see it.
                                                                                       
                                                                                       
</p>
<div class="verbatim" id="verbatim-5">
[allen@gullveig CactusClean]$ ./exe/cactus_world arrangements/CactusExamples \
 <br />  /HelloWorld/par/HelloWorld.par
 <br />--------------------------------------------------------------------------------
 <br />       10
 <br />  1   0101       ************************
 <br />  01  1010 10      The Cactus Code V4.0
 <br /> 1010 1101 011      www.cactuscode.org
 <br />  1001 100101    ************************
 <br />    00010101
 <br />     100011     (c) Copyright The Authors
 <br />      0100      GNU Licensed. No Warranty
 <br />      0101
 <br />
 <br />--------------------------------------------------------------------------------
 <br />Cactus version: 4.0.b12
 <br />Compile date:   May 01 2002 (10:26:44)
 <br />Run date:       May 01 2002 (10:28:35)
 <br />Run host:       gullveig.aei.mpg.de
 <br />Executable:     ./exe/cactus_world
 <br />Parameter file: arrangements/CactusExamples/HelloWorld/par/HelloWorld.par
 <br />--------------------------------------------------------------------------------
 <br />Activating thorn Cactus...Success -&#x003E; active implementation Cactus
 <br />Activation requested for
 <br />---&#x003E;HelloWorld&#x003C;---
 <br />Activating thorn HelloWorld...Success -&#x003E; active implementation helloworld
 <br />--------------------------------------------------------------------------------
 <br />  if (recover initial data)
 <br />    Recover parameters
 <br />  endif
 <br />
 <br />  Startup routines
 <br />
 <br />  Parameter checking routines
 <br />
 <br />  Initialisation
 <br />    if (NOT (recover initial data AND recovery_mode is ’strict’))
 <br />    endif
 <br />    if (recover initial data)
 <br />    endif
 <br />    if (checkpoint initial data)
 <br />    endif
 <br />    if (analysis)
 <br />    endif
 <br />    Do periodic output of grid variables
 <br />
                                                                                       
                                                                                       
 <br />  do loop over timesteps
 <br />    Rotate timelevels
 <br />    iteration = iteration + 1
 <br />    t = t+dt
 <br />    HelloWorld: Print message to screen
 <br />    if (checkpoint)
 <br />    endif
 <br />    if (analysis)
 <br />    endif
 <br />    Do periodic output of grid variables
 <br />
 <br />  do loop over timesteps
 <br />    Rotate timelevels
 <br />    iteration = iteration + 1
 <br />    t = t+dt
 <br />    HelloWorld: Print message to screen
 <br />    if (checkpoint)
 <br />    endif
 <br />    if (analysis)
 <br />    endif
 <br />    Do periodic output of grid variables
 <br />  enddo
 <br />
 <br />  Termination routines
 <br />
 <br />  Shutdown routines
 <br />--------------------------------------------------------------------------------
 <br />--------------------------------------------------------------------------------
 <br />INFO (HelloWorld): Hello World !
 <br />INFO (HelloWorld): Hello World !
 <br />INFO (HelloWorld): Hello World !
 <br />INFO (HelloWorld): Hello World !
 <br />INFO (HelloWorld): Hello World !
 <br />INFO (HelloWorld): Hello World !
 <br />INFO (HelloWorld): Hello World !
 <br />INFO (HelloWorld): Hello World !
 <br />INFO (HelloWorld): Hello World !
 <br />INFO (HelloWorld): Hello World !
 <br />--------------------------------------------------------------------------------
 <br />Done.
</div>
<!--l. 251--><p class="nopar" >
</p><!--l. 259--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-60005"></a>Parameters</h3>
                                                                                       
                                                                                       
<!--l. 265--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">6   </span> <a 
 id="x1-70006"></a>Interfaces</h3>
<!--l. 270--><p class="noindent" >
</p>
<h4 class="likesubsectionHead"><a 
 id="x1-80006"></a>General</h4>
<!--l. 272--><p class="noindent" ><span 
class="cmbx-10">Implements</span>:
</p><!--l. 274--><p class="noindent" >helloworld
</p><!--l. 279--><p class="noindent" >
</p>
<h3 class="sectionHead"><span class="titlemark">7   </span> <a 
 id="x1-90007"></a>Schedule</h3>
<!--l. 285--><p class="noindent" >This section lists all the variables which are assigned storage by thorn CactusExamples/HelloWorld. Storage can
either last for the duration of the run (<span 
class="cmbx-10">Always </span>means that if this thorn is activated storage will
be assigned, <span 
class="cmbx-10">Conditional </span>means that if this thorn is activated storage will be assigned for the
duration of the run if some condition is met), or can be turned on for the duration of a schedule
function.
</p><!--l. 288--><p class="noindent" >
</p>
<h4 class="likesubsectionHead"><a 
 id="x1-100007"></a>Storage</h4>
<!--l. 288--><p class="noindent" >NONE
</p>
<h4 class="likesubsectionHead"><a 
 id="x1-110007"></a>Scheduled Functions</h4>
<!--l. 292--><p class="noindent" ><span 
class="cmbx-10">CCTK</span><span 
class="cmbx-10">_EVOL</span>
</p><!--l. 294--><p class="noindent" >      helloworld
</p><!--l. 296--><p class="noindent" >     <span 
class="cmti-10">print message to screen</span>
</p><!--l. 299--><p class="noindent" > 
</p>
<div class="tabular"> <table id="TBL-2" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1" /><col 
id="TBL-2-2" /><col 
id="TBL-2-3" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-1-1"  
class="td11"> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-2"  
class="td11">Language:</td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-3"  
class="td11">c         </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-2-1"  
class="td11"> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-2"  
class="td11">Type:      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-3"  
class="td11">function</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-2-3-1"  
class="td11">  </td></tr></table></div>
 
</body></html> 

                                                                                       


